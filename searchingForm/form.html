<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>the-simple-way-form</title>

    <link type="text/css" media="screen" charset="utf-8" rel="stylesheet" href="stylearale/base.css"/>
    <link type="text/css" media="screen" charset="utf-8" rel="stylesheet" href="stylearale/font.css"/>
    <link type="text/css" media="screen" charset="utf-8" rel="stylesheet" href="stylearale/function.css"/>
    <link type="text/css" media="screen" charset="utf-8" rel="stylesheet" href="stylearale/tpl/ui-table.css"/>
    <link type="text/css" media="screen" charset="utf-8" rel="stylesheet" href="stylearale/tpl/ui-title.css"/>
    <link type="text/css" media="screen" charset="utf-8" rel="stylesheet" href="stylearale/tpl/ui-button.css"/>
    <link type="text/css" media="screen" charset="utf-8" rel="stylesheet" href="stylearale/tpl/ui-form.css"/>
    <link type="text/css" media="screen" charset="utf-8" rel="stylesheet" href="stylearale/tpl/ui-tip.css"/>
    <link type="text/css" media="screen" charset="utf-8" rel="stylesheet" href="stylearale/tpl/ui-tab.css"/>
    <link type="text/css" media="screen" charset="utf-8" rel="stylesheet" href="stylearale/tpl/ui-list.css"/>
    <link type="text/css" media="screen" charset="utf-8" rel="stylesheet" href="stylearale/tpl/ui-xbox.css"/>
    <link type="text/css" media="screen" charset="utf-8" rel="stylesheet" href="stylearale/tpl/ui-box.css"/>
    <link type="text/css" media="screen" charset="utf-8" rel="stylesheet" href="stylearale/tpl/ui-message.css"/>
    <link type="text/css" media="screen" charset="utf-8" rel="stylesheet" href="stylearale/tpl/ui-icon.css"/>
    <link type="text/css" media="screen" charset="utf-8" rel="stylesheet" href="stylearale/tpl/ui-line.css"/>
    <link type="text/css" media="screen" charset="utf-8" rel="stylesheet" href="stylearale/tpl/ui-footer.css"/>
    <link type="text/css" media="screen" charset="utf-8" rel="stylesheet" href="stylearale/tpl/ui-notice.css"/>
    <link type="text/css" media="screen" charset="utf-8" rel="stylesheet" href="stylearale/tpl/ui-step.css"/>
    <link type="text/css" media="screen" charset="utf-8" rel="stylesheet" href="stylearale/tpl/ui-pop.css"/>
    <link type="text/css" media="screen" charset="utf-8" rel="stylesheet" href="stylearale/tpl/ui-column.css"/>
    <link type="text/css" media="screen" charset="utf-8" rel="stylesheet" href="stylearale/tpl/ui-repeater.css"/>
    <link type="text/css" media="screen" charset="utf-8" rel="stylesheet" href="stylearale/tpl/ui-paging.css"/>
    <link type="text/css" media="screen" charset="utf-8" rel="stylesheet" href="stylearale/tpl/ui-dialog.css"/>
    <link type="text/css" media="screen" charset="utf-8" rel="stylesheet" href="stylearale/tpl/ui-list-icons.css"/>
    <link type="text/css" media="screen" charset="utf-8" rel="stylesheet" href="stylearale/tpl/ui-slider-digit.css"/>
    <link type="text/css" media="screen" charset="utf-8" rel="stylesheet" href="stylearale/tpl/ui-grid.css"/>
    <link type="text/css" media="screen" charset="utf-8" rel="stylesheet"
          href="stylearale/solutions/sl-input-file.css"/>
    <link type="text/css" media="screen" charset="utf-8" rel="stylesheet" href="stylearale/solutions/sl-linear.css"/>
    <link type="text/css" media="screen" charset="utf-8" rel="stylesheet" href="stylearale/default.css"/>
    <style type="text/css">
        .section {
            margin: 20px 0 0;
        }
    </style>
</head>
<body>
<form class="ui-form fn-mt20" method="post" action="#">
    <div class="ui-form-item ui-form-item-success">
        <label class="ui-label"><span class="required">*</span>网点编号：</label>
        <input id="J_siteNo" name="siteNo" type="text" value="aaaaa" class="ui-input" />

        <div class="ui-form-explain fn-hide">提示信息</div>
    </div>
    <div class="ui-form-item ui-form-item-success">
        <label class="ui-label"><span class="required">*</span>批次号：</label>
        <input id="J_batchNo" name="batchNo" type="text" value="12445" class="ui-input" />

        <div class="ui-form-explain fn-hide">请填写批次号</div>
    </div>
    <div class="ui-form-item ui-form-item-cue">
        <label class="ui-label">创建时间：</label>
        <input id="J_beginDate" name="beginDate" type="text" class="ui-input ui-input-hover" value="2012-01-01" />
        <span class="ui-form-spliter">到</span>
        <input id="J_endDate" name="endDate" type="text" class="ui-input" value="2012-02-03" />

        <div class="ui-form-explain">起始日期, 格式为 yyyy-mm-dd</div>
    </div>

    <div class="ui-form-item ui-form-item-last">
        <span class="ui-button ui-button-mblue ui-button-mblue-next">
            <input type="submit" value="确定" class="ui-button-text">
            <span class="ui-button-icon"></span>
        </span>
    </div>

    <div class="ui-table fn-mt20">
        <table>
            <colgroup>
                <col width="200">
                <col width="200">
                <col width="200">
                <col>
            </colgroup>
            <thead>
            <tr>
                <th>
                    <a href="#" class="sort">序号</a>
                </th>
                <th>
                    <a href="#" class="sort">名称</a>
                </th>
                <th>
                    <a href="#" class="sort">简介</a>
                </th>
                <th>
                    <a href="#" class="sort">备注</a>
                </th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>90000</td>
                <td>兰坤</td>
                <td>111111111111111111</td>
                <td>江西体彩</td>
            </tr>
            <tr class="ui-table-spliter">
                <td>90000</td>
                <td>兰坤</td>
                <td>111111111111111111</td>
                <td>江西体彩</td>
            </tr>
            <tr>
                <td>90000</td>
                <td>兰坤</td>
                <td>111111111111111111</td>
                <td>江西体彩</td>
            </tr>
            <tr class="ui-table-spliter">
                <td>90000</td>
                <td>兰坤</td>
                <td>111111111111111111</td>
                <td>江西体彩</td>
            </tr>
            <tr>
                <td>90000</td>
                <td>兰坤</td>
                <td>111111111111111111</td>
                <td>江西体彩</td>
            </tr>
            </tbody>
        </table>
    </div>

    <div class="section">
        <!-- begin ui-paging -->
        <div class="ui-paging fn-clear">
            <input type="hidden" id="J_totalItmes" value="152" />
            <input type="hidden" id="J_pagingCurrent" value="2">
<!--
            <a class="ui-paging-prev" href="#">上一页</a>
            <a class="ui-paging-item" href="#"><span>1</span></a>
            <a class="ui-paging-item ui-paging-current" href="#"><span>2</span></a>
            <a class="ui-paging-item" href="#"><span>3</span></a>
            <a class="ui-paging-item" href="#"><span>4</span></a>
            <a class="ui-paging-item" href="#"><span>5</span></a>
            <a class="ui-paging-item" href="#"><span>6</span></a>
            <a class="ui-paging-item" href="#"><span>7</span></a>
            <span class="ui-paging-ellipsis">...</span>
            <a class="ui-paging-item" href="#"><span>1024</span></a>
            <a class="ui-paging-next" href="#">下一页</a>

            <span class="ui-paging-info fn-ml0"><span class="ui-paging-bold">2/1024</span>页</span>
            <span class="ui-paging-info ui-paging-which">
                <input id="J_pageNumber" type="text" value="" name="some_name">
            </span>
            <a href="#" class="ui-paging-info ui-paging-goto"><span>跳转</span></a>
            -->
        </div>
        <!-- end ui-paging -->
    </div>

<!--
    <div class="section">

        <div class="ui-paging fn-clear">
            <a class="ui-paging-prev" href="#">上一页</a>
            <span class="ui-paging-info">第<span class="ui-paging-bold">5/7</span>页</span>
            <a class="ui-paging-next" href="#">下一页</a>
        </div>

    </div>


    <div class="section">
        <div class="ui-paging ui-paging-text fn-clear">
            <a class="ui-paging-first" href="#">首页</a>
            <a class="ui-paging-prev" href="#">上一页</a>
            <span class="ui-paging-info">21 - 40条，共60条</span>
            <a class="ui-paging-next" href="#">上一页</a>
            <a class="ui-paging-last" href="#">尾页</a>
        </div>
    </div>

    -->
</form>

<script type="text/javascript" src="jquery-1.7.2.js"></script>
<script type="text/javascript" src="../lib/dev/Class.js"></script>

<script type="text/javascript" src="lib/util.js"></script>
<script type="text/javascript" src="lib/searchModule.js"></script>
<script type="text/javascript" src="lib/form.js"></script>
<script type="text/javascript" src="lib/paginator.js"></script>
<script type="text/javascript" src="lib/element.js"></script>
<script type="text/javascript" src="lib/table.js"></script>


<script type="text/javascript">
    var regCal = /^\d{4}-((0[1-9]{1})|(1[0-2]{1}))-((0[1-9]{1})|([1-2]{1}[0-9]{1})|(3[0-1]{1}))$/;

    var elementsArray = ElementFactory(QueryElement, [{
        key : 'calendar',
        value : "{beginDate : $('#J_beginDate').val(), endDate : $('#J_endDate').val()}",
        //errHandler : function(msg){},
        validate : function(){
            var b = this.data.value.beginDate, e = this.data.value.endDate;
            if(!(regCal.test(b) && regCal.test(e))){
                return '日期格式错误！';
            }
            if(b > e){
                return '开始日期不能大于结束日期';
            }
        }
    }, {
        key : '#J_siteNo',
        value : "{siteNo : $(this.key).val()}",
        //errHandler : function(msg){},
        validate : function(){
            if(this.data.value.siteNo.length > 5 ){
                return '长度不能大于5！';
            }
        }
    },{
        key : '#J_batchNo',
        value : "{batchNo : $(this.key).val()}"
    }]);

    var pageElements = ElementFactory(QueryElement, [{
        key : 'page',
        value : "{current : $('#J_pagingCurrent').val(), totalPages : 8, totalItems : $('#J_totalItmes').val()}"
        //value : "{current : 1, totalPages : 8}"
    },{
        key : 'size'
    }, {
        key : 'number',
        value : "{number : $('#J_pageNumber').val()}",
        //errHandler : function(msg){},
        validate : function(){
            var v = this.data.value.number;
            if(v && isNaN(Number(v))){
                return 'must be a number!';
            }
            if(v === ''){
                return 'could not be empty!';
            }
        }
    }]);

    console.log(elementsArray);
    console.log(pageElements);

    var f = new SearchingForm({
        collection : elementsArray,
        registerEvents : function(){
            $('.ui-button-mblue').bind('click', this.doSearch);
        },
        search : function(data){
            console.log('custom');
            console.log('post? submit? as your wish!');
        }
    });

    var pg = new Paginator({
        collection : pageElements,
        pageDefault : {
            number : {number : 1},
            size : {size : 10}
        },
        registerEvents : function(){
            //$('#J_sizePerPage').bind('change', this.changeSize);
            //$('.ui-paging-goto').bind('click', this.paginate);
            $('[class*="ui-paging-"]').bind('click', this.paginate);

        }
    });

    !function(){
        f.interfaceReg('getDefault', pg);
        f.interfaceReg('getData', pg);
        pg.interfaceReg('doSearch', f);
        console.log(pg.pageDefault);

    }();

</script>
</body>
</html>